# 社内名刺管理システム

## プロジェクト概要
- **名前**: Business Cards Manager
- **目標**: 社内での名刺共有・管理を効率的に行うWebアプリケーション
- **主要機能**: 
  - 名刺のCRUD操作（作成・表示・更新・削除）
  - 全文検索機能（FTS5）
  - 会社・部署での絞り込み機能
  - タグ機能による分類
  - 統計ダッシュボード

## URLs
- **開発環境**: https://3000-i184visbb280hl2m4a86g-6532622b.e2b.dev
- **GitHub**: 未設定（後で設定予定）
- **API Base**: https://3000-i184visbb280hl2m4a86g-6532622b.e2b.dev/api

## 完成済み機能

### ✅ データベース設計
- **business_cards テーブル**: 名刺基本情報
- **tags テーブル**: タグ管理
- **business_card_tags テーブル**: 名刺とタグの関連
- **FTS5 仮想テーブル**: 全文検索対応

### ✅ API エンドポイント
| エンドポイント | メソッド | 説明 |
|---|---|---|
| `/api/cards` | GET | 名刺一覧取得（検索・フィルタリング対応） |
| `/api/cards/:id` | GET | 特定の名刺取得 |
| `/api/cards` | POST | 新規名刺登録 |
| `/api/cards/:id` | PUT | 名刺更新 |
| `/api/cards/:id` | DELETE | 名刺削除 |
| `/api/tags` | GET | タグ一覧取得 |
| `/api/stats` | GET | 統計情報取得 |

### ✅ フロントエンド機能
- レスポンシブデザイン（TailwindCSS）
- 名刺カード表示・編集・削除
- モーダルベースの名刺登録・編集
- リアルタイム検索・フィルタリング
- 統計ダッシュボード
- タグ機能
- エラーハンドリング・通知機能

### ✅ 検索・フィルタリング機能
- 氏名・会社名・部署・役職による全文検索
- 会社別フィルタリング
- タグによる絞り込み
- 結果の並び替え（新着順）

## データアーキテクチャ
- **データモデル**: 正規化されたリレーショナル設計
- **ストレージサービス**: Cloudflare D1 SQLite データベース
- **検索機能**: FTS5 仮想テーブルによる全文検索
- **データフロー**: Frontend → Hono API → D1 Database

## ユーザーガイド

### 基本操作
1. **名刺一覧表示**: トップページで全ての名刺を確認
2. **新規登録**: 「新規登録」ボタンから名刺情報を入力
3. **検索**: 検索ボックスで氏名や会社名を入力
4. **フィルタリング**: 会社セレクトボックスで絞り込み
5. **編集**: 各名刺カードの編集ボタンをクリック
6. **削除**: 各名刺カードの削除ボタンで削除（確認あり）

### 高度な機能
- **タグ機能**: 名刺にタグを追加してカテゴライズ
- **全文検索**: 名前、会社名、部署、役職、メモから横断検索
- **統計表示**: 総名刺数、企業数、今週の追加数を表示

### 必須入力項目
- **氏名**: 必須
- **会社名**: 必須
- その他の項目は任意

## 技術仕様

### 開発環境
- **プラットフォーム**: Cloudflare Pages + Workers
- **フレームワーク**: Hono (TypeScript)
- **データベース**: Cloudflare D1 (SQLite)
- **フロントエンド**: Vanilla JavaScript + TailwindCSS
- **デプロイ**: Wrangler CLI

### 未実装機能

#### 🔄 名刺画像アップロード機能
- **R2ストレージ**: 名刺画像の保存
- **ファイルアップロード**: 画像アップロード UI
- **画像表示**: 名刺カードでの画像表示
- **実装優先度**: 中

#### 🔄 認証・ユーザー管理
- **ユーザー登録・ログイン機能**
- **アクセス制御**: ユーザー別アクセス権限
- **実装優先度**: 低

#### 🔄 エクスポート機能
- **CSV エクスポート**: 名刺データのCSV出力
- **名刺印刷**: PDFでの名刺出力
- **実装優先度**: 低

## 推奨される次のステップ

### 優先度: 高
1. **Cloudflare Pages デプロイ**
   - 本番データベース作成
   - 実際のCloudflare Pages環境へのデプロイ

### 優先度: 中
2. **名刺画像アップロード機能の実装**
   - R2バケット設定
   - 画像アップロードAPI追加
   - フロントエンドUI更新

3. **GitHub連携**
   - GitHubリポジトリ作成
   - CI/CDパイプライン設定

### 優先度: 低
4. **機能拡張**
   - ユーザー認証機能
   - エクスポート機能
   - 名刺画像OCR機能

## デプロイメント
- **ステータス**: ✅ ローカル開発環境で稼働中
- **技術スタック**: Hono + TypeScript + TailwindCSS + Cloudflare D1
- **最終更新**: 2025-09-08

## 開発コマンド

```bash
# ローカル開発
npm run build                    # アプリケーションをビルド
pm2 start ecosystem.config.cjs   # PM2で開発サーバー起動
npm run test                     # アプリケーションテスト

# データベース
npm run db:migrate:local         # ローカルマイグレーション適用
npm run db:seed                  # サンプルデータ投入
npm run db:reset                 # データベースリセット
npm run db:console:local         # ローカルDB コンソール

# デプロイ
npm run deploy                   # Cloudflare Pages にデプロイ
```

## サンプルデータ
システムには以下のサンプル名刺が登録済みです：
- 田中 太郎（株式会社テックソリューション - 営業部長）
- 佐藤 花子（合同会社イノベート - CTO）  
- 山田 次郎（有限会社デザインワークス - デザイナー）
- 鈴木 美咲（株式会社マーケティングプロ - マネージャー）
- 高橋 健一（個人事業主 - フリーランス）

各名刺にはタグが設定されており、検索・フィルタリング機能をテストできます。